(function(t){function e(e){for(var n,l,a=e[0],r=e[1],c=e[2],p=0,f=[];p<a.length;p++)l=a[p],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&f.push(s[l][0]),s[l]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,a=1;a<i.length;a++){var r=i[a];0!==s[r]&&(n=!1)}n&&(o.splice(e--,1),t=l(l.s=i[0]))}return t}var n={},s={app:0},o=[];function l(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=n,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(i,n,function(e){return t[e]}.bind(null,n));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],r=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=r;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"07fb":function(t,e,i){t.exports=i.p+"img/compress.239d4693.svg"},"15ac":function(t,e,i){"use strict";i("f78c")},"1d07":function(t,e,i){t.exports=i.p+"img/music.0005d978.svg"},"1e68":function(t,e,i){t.exports=i.p+"img/excel.48921563.svg"},"48f4":function(t,e,i){t.exports=i.p+"img/pdf.247be43c.svg"},"4a7c":function(t,e,i){t.exports=i.p+"img/video.2d79e859.svg"},"56d7":function(t,e,i){"use strict";i.r(e);var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"App"},[i("index")],1)},o=[],l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"Home"},[n("transition-group",{staticClass:"content",attrs:{name:"del",appear:""}},t._l(t.fileList,(function(e,s){return n("div",{key:e.id,staticClass:"imgBox",on:{mouseenter:function(e){return t.show(s)},mouseleave:function(e){t.currrentIndex=null},touchstart:function(e){return t.show(s)},touchend:function(e){t.currrentIndex=null}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isFinish,expression:"!item.isFinish"}],staticClass:"mask",style:{height:0==e.pre?"100%":e.pre}},[n("span",[t._v(" "+t._s(0==e.pre?!0===e.isUpload?"排队中":"待上传":"100%"==e.pre?"上传完毕":e.pre))]),n("span",{staticClass:"lyb-one-line",class:{failFc:e.isFail}},[t._v(t._s(0==e.pre?e.name:"100%"==e.pre?e.isFail?"未成功":"等待响应":"上传中"))]),n("span",{staticClass:"lyb-one-line"},[t._v(t._s(0==e.pre?e.size[2]:""))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isFinish||e.isFail,expression:"item.isFinish || item.isFail"}],staticClass:"finish",class:{failBgc:!e.isFinish}},[n("lyb-icon",{staticStyle:{transform:"rotate(-45deg)"},attrs:{imgUrl:e.isFinish?i("a0e3"):i("9ef1"),size:"12px",bottom:"3px"}})],1),n("img",{attrs:{src:e.url}}),n("transition",{attrs:{name:"show"}},[t.currrentIndex==s?n("div",{staticClass:"operation",on:{click:function(e){return t.delImg(s)}}}):t._e()])],1)})),0),n("transition",{staticClass:"bottom",attrs:{name:"into",appear:""}},[n("div",{staticClass:"bottom"},[n("div",{staticClass:"box1"},[n("input",{ref:"file",staticStyle:{display:"none"},attrs:{type:"file",id:"select",multiple:""},domProps:{value:[]},on:{change:function(e){return t.filePreview()}}}),n("label",{attrs:{for:"select"}},[n("div",{staticClass:"select"})])]),n("div",{staticClass:"box2"},[n("div",{staticClass:"operate",on:{click:t.uploadClick}},[n("div",{staticClass:"btn1 lyb-button"},[t._v("开始上传")])]),n("div",{staticClass:"operate",on:{click:t.del}},[n("div",{staticClass:"btn2 lyb-button"},[t._v("清除已上传")])]),n("div",{staticClass:"operate",on:{click:t.clear}},[n("div",{staticClass:"btn3 lyb-button"},[t._v("清空列表")])])])])])],1)},a=[],r=i("bc3a"),c=i.n(r),u=i("6736"),p=i.n(u);c.a.defaults.timeout=3e4;const f={movie:p.a.movie,upload:p.a.upload};function d(t,e,i,n={}){return c.a.post(f[t]+e,i,n)}c.a.interceptors.request.use(t=>t),c.a.interceptors.response.use(t=>t);const m=(t,e)=>d("upload","/deal/identify/0",t,e);function g(t){return t.replace(/.+\./,"").toLowerCase()}function h(t){if(0==t)return[0,"B","0 B"];let e=1024,i=0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(t)/Math.log(e));return i=(t/e**s).toFixed(2)?(t/e**s).toFixed(2):0,[i,n[s],`${i} ${n[s]}`]}var v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"lyb-icon",style:{width:""+t.size,height:""+t.size,margin:t.top+" "+t.right+" "+t.bottom+" "+t.left},attrs:{title:t.title}},[i("div",{staticClass:"lyb-icon-hover",style:{backgroundImage:"url("+t.imgUrlHover+")"}}),i("div",{staticClass:"lyb-icon-default",style:{backgroundImage:"url("+t.imgUrl+")"}})])},b=[],x={name:"lyb-icon",props:{imgUrl:{default:i("f1e5")},imgUrlHover:{default:null},title:{type:String,default:""},size:{type:String,default:"25px"},top:{type:String,default:"0px"},right:{type:String,default:"0px"},bottom:{type:String,default:"0px"},left:{type:String,default:"0px"}}},w=x,y=(i("15ac"),i("2877")),C=Object(y["a"])(w,v,b,!1,null,"566e40fc",null),_=C.exports,F={name:"lyb-up-load",props:{},components:{lybIcon:_},data(){return{fileList:[],currrentIndex:null,max_upload_num:3}},computed:{fileIcon(){return function(t){let e="jpg,jpeg,png,gif",i="mp3,ogg",n="mp4",s="txt",o="pdf",l="doc,docx",a="xls,xlsx",r="ppt,pptx",c="zip,7z",u="exe,apk";return e.includes(t)?"img":c.includes(t)?"compress":a.includes(t)?"excel":i.includes(t)?"music":o.includes(t)?"pdf":r.includes(t)?"ppt":u.includes(t)?"software":s.includes(t)?"txt":n.includes(t)?"video":l.includes(t)?"word":"unknown"}},judge(){return function(t){return 0!==t.isUpload&&1!==t.isUpload&&!t.isUploading}},existFinish(){return this.fileList.some(t=>t.isFinish)}},methods:{show(t){this.currrentIndex=t},delImg(t){this.fileList[t].isUploading&&this.fileList[t].cancel(),this.fileList.splice(t,1),this.currrentIndex=null},filePreview(){const t=this.$refs.file.files;let e={compress:i("07fb"),excel:i("1e68"),music:i("1d07"),pdf:i("48f4"),ppt:i("9000"),software:i("5d66"),txt:i("b966"),unknown:i("caa0"),video:i("4a7c"),word:i("f1f9")};[...t].forEach(t=>{let i=this.fileIcon(g(t.name));this.fileList.push({id:this.fileList.length+(new Date).getTime(),name:t.name,size:h(t.size),url:"img"==i?window.URL.createObjectURL(t):e[i],time:(new Date).getTime(),pre:0,isUpload:!1,isUploading:!1,isFinish:!1,isFail:!1,cancel:null,file:t})})},uploadClick(){let t=this.max_upload_num-this.fileList.filter(t=>t.isUploading).length;this.fileList.forEach(t=>{[!1,0].includes(t.isUpload)&&(t.isUpload=!0,t.pre=0,t.isFail=!1)});for(let e=0;e<t;e++)this.startUpLoad();t=0},async startUpLoad(){while(this.fileList.some(t=>this.judge(t))){let t=this.fileList.find(t=>this.judge(t));console.log(t&&await this.uploadFile(t))}},uploadFile(t){return new Promise(e=>{t.isUploading=!0;const i=new FormData;i.append("file",t.file),m(i,{onUploadProgress(e){t.pre=Math.round(e.loaded/e.total*100)+"%"},cancelToken:new c.a.CancelToken(e=>{t.cancel=e})}).then(i=>{e(i),t.cancel=null,t.isFinish=!0,t.isUpload=1,t.isUploading=!1,t.pre="100%"}).catch(i=>{e(void 0==i.message?"取消上传":"上传失败"),t.cancel=null,t.pre="100%",t.isFail=!0,t.isUpload=0,t.isUploading=!1})})},del(){while(this.existFinish)this.fileList.forEach((t,e)=>{t.isFinish&&this.fileList.splice(e,1)})},clear(){this.fileList.forEach(t=>{t.cancel&&t.cancel()}),this.fileList=[]}}},U=F,L=(i("c863"),Object(y["a"])(U,l,a,!1,null,"07c1e542",null)),k=L.exports,j={components:{index:k}},O=j,B=Object(y["a"])(O,s,o,!1,null,null,null),I=B.exports;i("99fc"),i("6672");n["a"].config.productionTip=!1,new n["a"]({render:t=>t(I)}).$mount("#app")},"5d66":function(t,e,i){t.exports=i.p+"img/software.594f866b.svg"},6672:function(t,e,i){},6736:function(t,e){const i=Object.is("production","production");t.exports={movie:i?"https://api.web.360kan.com":"movie",upload:i?"https://www.tuchuangs.com":"upload"}},9e3:function(t,e,i){t.exports=i.p+"img/ppt.c19a05ed.svg"},"99fc":function(t,e,i){},"9ef1":function(t,e,i){t.exports=i.p+"img/fail.f456c521.svg"},a0e3:function(t,e,i){t.exports=i.p+"img/finish.6c41608b.svg"},abbf:function(t,e,i){},b966:function(t,e,i){t.exports=i.p+"img/txt.13abdaaa.svg"},c863:function(t,e,i){"use strict";i("abbf")},caa0:function(t,e,i){t.exports=i.p+"img/unknown.36c96413.svg"},f1e5:function(t,e,i){t.exports=i.p+"img/smile-gray.c37b288c.png"},f1f9:function(t,e,i){t.exports=i.p+"img/word.f6b2d3dc.svg"},f78c:function(t,e,i){}});
//# sourceMappingURL=app.e6239e57.js.map